"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}!function(){var t=function(t){var e=1e6,n=1e3*e,r=1e3*n;return t?(""+t).indexOf(" ")>-1?t:(t=parseFloat(t),t<1e3?t+" bytes":t<e?(t/1e3).toFixed(1)+" kB":t<n?(t/e).toFixed(1)+" MB":t<r?(t/n).toFixed(1)+" GB":(t/r).toFixed(1)+" TB"):"-"};angular.module("icsm.bounds",["icsm.message"]).directive("icsmBounds",["$rootScope","icsmMessageService","boundsService",function(t,e,n){return{restrict:"AE",link:function(){n.init().then(null,null,function(t){switch(e.removeFlash(),t.type){case"error":case"warn":case"info":e[t.type](t.text);break;case"wait":e.wait(t.text);break;default:e.flash(t.text,t.duration?t.duration:8e3,"wait"===t.type)}})}}}]).factory("boundsService",["$http","$q","$rootScope","$timeout","configService","flashService","messageService",function(e,n,r,i,a,o,s){function c(t,e,n){o.remove(h),t&&("error"===e?s.error(t):h=o.add(t,n,!0))}function l(t){var e=n.defer(),r=m(t);if(r&&r.code)switch(r.code){case"oversize":i(function(){c("","clear"),c("The selected area is too large to process. Please restrict to approximately 4 degrees square.","error"),e.resolve(r)});break;case"undersize":i(function(){c("","clear"),c("X Min and Y Min should be smaller than X Max and Y Max, respectively. Please update the drawn area.","error"),e.resolve(r)});break;default:return n.when(r)}return e.promise}function u(t){var e=(t.xMax-t.xMin)*(t.yMax-t.yMin);return e<1e-11||t.xMax<t.xMin}function d(t){var e=Math.abs((t.xMax-t.xMin)*(t.yMax-t.yMin));return e>4}function p(t){t.xMax=null===t.xMax?null:+t.xMax,t.xMin=null===t.xMin?null:+t.xMin,t.yMax=null===t.yMax?null:+t.yMax,t.yMin=null===t.yMin?null:+t.yMin}function m(t){return p(t),d(t)?{code:"oversize"}:u(t)?{code:"undersize"}:null===t.xMax?{code:"incomplete"}:f(t)?{code:"success"}:{code:"invalid"}}function f(t){return t&&angular.isNumber(t.xMax)&&angular.isNumber(t.xMin)&&angular.isNumber(t.yMax)&&angular.isNumber(t.yMin)&&!d(t)&&!u(t)}function g(n){function i(t){Object.keys(t).forEach(function(e){var n=t[e];Object.keys(n).forEach(function(t){var e=n[t];e.forEach(function(t){return o(t)})})})}function o(e){if(e.fileSize=t(e.file_size),e.product){var r=e.bbox.split(",").map(function(t){return+t});e.bbox=[Math.max(r[0],n.xMin),Math.max(r[1],n.yMin),Math.min(r[2],n.xMax),Math.min(r[3],n.yMax)].join(",")}}a.getConfig("processing").then(function(t){var a=t.intersectsUrl;if(a){var o=a.replace("{maxx}",n.xMax).replace("{minx}",n.xMin).replace("{maxy}",n.yMax).replace("{miny}",n.yMin);c("Checking there is data in your selected area...","wait",18e4),e.get(o).then(function(t){if(t.data&&t.data.available_data){var e=!1;c("","clear"),t.data.available_data&&t.data.available_data.forEach(function(t){t.downloadables&&(i(t.downloadables),e=!0)}),e||c("There is no data held in your selected area. Please try another area.",null,4e3),r.$broadcast("site.selection",t.data)}},function(t){c("The service that provides the list of datasets is currently unavailable. Please try again later.","error")})}})}var h=void 0;return{init:function(){return h=n.defer(),r.$on("icsm.clip.drawn",function(t,e){c("Area drawn. Checking for data..."),l(e).then(function(t){"success"===t.code&&g(e)})}),h.promise},cancelDraw:function(){drawService.cancelDrawRectangle()},checkSize:function(t){return l(t)}}}])}();var RootCtrl=function t(e,n,r){var i=this;_classCallCheck(this,t),r.getMap().then(function(t){i.map=t}),n.getConfig().then(function(t){i.data=t;try{var e=document.createElement("canvas");t.modern=!(!window.WebGLRenderingContext||!e.getContext("webgl")&&!e.getContext("experimental-webgl"))}catch(n){t.modern=!1}})};RootCtrl.$invoke=["$http","configService","mapService"],angular.module("IcsmApp",["common.altthemes","common.baselayer.control","common.cc","common.featureinfo","common.header","common.legend","common.navigation","common.reset","common.storage","common.templates","explorer.config","explorer.confirm","explorer.drag","explorer.enter","explorer.flasher","explorer.googleanalytics","explorer.httpdata","explorer.info","explorer.legend","explorer.message","explorer.modal","explorer.persist","explorer.projects","explorer.tabs","explorer.version","exp.ui.templates","explorer.map.templates","ui.bootstrap","ui.bootstrap-slider","ngAutocomplete","ngRoute","ngSanitize","page.footer","geo.draw","geo.elevation","geo.geosearch","geo.map","geo.maphelper","geo.measure","icsm.bounds","icsm.contributors","icsm.clip","icsm.glossary","icsm.help","icsm.panes","icsm.products","icsm.side-panel","elvis.header","elvis.results","elvis.reviewing","icsm.mapevents","icsm.select","icsm.splash","icsm.layerswitch","icsm.templates","elevation.toolbar","icsm.view"]).config(["configServiceProvider","projectsServiceProvider","persistServiceProvider","versionServiceProvider",function(t,e,n,r){t.location("icsm/resources/config/config.json"),t.dynamicLocation("icsm/resources/config/appConfig.json?t="),r.url("icsm/assets/package.json"),e.setProject("icsm"),n.handler("local")}]).factory("userService",[function(){function t(){return!0}return{login:t,hasAcceptedTerms:t,setAcceptedTerms:t,getUsername:function(){return"anon"}}}]).controller("RootCtrl",RootCtrl),angular.module("icsm.clip",["geo.draw"]).directive("icsmInfoBbox",function(){return{restrict:"AE",templateUrl:"icsm/clip/infobbox.html"}}).directive("icsmClip",["$rootScope","$timeout","clipService","messageService","mapService",function(t,e,n,r,i){return{templateUrl:"icsm/clip/clip.html",scope:{bounds:"=",trigger:"=",drawn:"&"},link:function(a,o){a.clip=n.data.clip,a.typing=!1,"undefined"==typeof a.showBounds&&(a.showBounds=!1),i.getMap().then(function(t){a.$watch("bounds",function(t){t&&a.trigger?e(function(){a.initiateDraw()}):t||n.cancelDraw()})}),t.$on("icsm.clip.draw",function(t,n){n&&"oversize"===n.message?(a.oversize=!0,e(function(){delete a.oversize},6e3)):delete a.oversize}),a.initiateDraw=function(){r.info("Click on the map and drag to define your area of interest."),n.initiateDraw()}}}}]).factory("clipService",["$q","$rootScope","drawService",function(t,e,n){function r(t){var e=i.data.clip;return e.xMax=t.bounds.getEast().toFixed(5),e.xMin=t.bounds.getWest().toFixed(5),e.yMax=t.bounds.getNorth().toFixed(5),e.yMin=t.bounds.getSouth().toFixed(5),i.data.area=(e.xMax-e.xMin)*(e.yMax-e.yMin),i.data}var i={data:{clip:{}},initiateDraw:function(){e.$broadcast("clip.initiate.draw",{started:!0});var t=this.data.clip;return delete t.xMin,delete t.xMax,delete t.yMin,delete t.yMax,delete t.area,n.drawRectangle({retryOnOversize:!1})},cancelDraw:function(){n.cancelDrawRectangle()},setClip:function(t){return r(t)}};return e.$on("bounds.drawn",function(t,n){console.log("data",n),i.setClip(n);var r=i.data.clip;e.$broadcast("icsm.clip.drawn",r),e.$broadcast("icsm.bounds.draw",[r.xMin,r.yMin,r.xMax,r.yMax])}),i}]);var GlossaryCtrl=function(t,e){var n=this;t.info("GlossaryCtrl"),e.getTerms().then(function(t){n.terms=t})},GlossaryService=function(t){var e="icsm/resources/config/glossary.json";return{getTerms:function(){return t.get(e,{cache:!0}).then(function(t){return t.data})}}};angular.module("icsm.glossary",[]).directive("icsmGlossary",[function(){return{templateUrl:"icsm/glossary/glossary.html"}}]).controller("GlossaryCtrl",GlossaryCtrl).factory("glossaryService",GlossaryService),GlossaryCtrl.$inject=["$log","glossaryService"],GlossaryService.$inject=["$http"];var ContributorsService=function(t){var e={show:!1,ingroup:!1,stick:!1};return t.get("icsm/resources/config/contributors.json").then(function(t){e.orgs=t.data}),{getState:function(){return e}}};angular.module("icsm.contributors",[]).directive("icsmContributors",["$interval","contributorsService",function(t,e){return{templateUrl:"icsm/contributors/contributors.html",scope:{},link:function(n,r){var i=void 0;n.contributors=e.getState(),n.over=function(){t.cancel(i),n.contributors.ingroup=!0},n.out=function(){i=t(function(){n.contributors.ingroup=!1},1e3)},n.unstick=function(){n.contributors.ingroup=n.contributors.show=n.contributors.stick=!1,r.find("a").blur()}}}}]).directive("icsmContributorsLink",["$interval","contributorsService",function(t,e){return{restrict:"AE",templateUrl:"icsm/contributors/show.html",scope:{},link:function(n){var r=void 0;n.contributors=e.getState(),n.over=function(){t.cancel(r),n.contributors.show=!0},n.toggleStick=function(){n.contributors.stick=!n.contributors.stick,n.contributors.stick||(n.contributors.show=n.contributors.ingroup=!1)},n.out=function(){r=t(function(){n.contributors.show=!1},700)}}}}]).factory("contributorsService",ContributorsService).filter("activeContributors",function(){return function(t){return t?t.filter(function(t){return t.enabled}):[]}}),ContributorsService.$inject=["$http"],angular.module("elvis.header",[]).controller("headerController",["$scope","$q","$timeout",function(t,e,n){var r=function(t){return t};t.$on("headerUpdated",function(e,n){t.headerConfig=r(n)})}]).directive("elvisHeader",[function(){var t={current:"none",heading:"ICSM",headingtitle:"ICSM",helpurl:"help.html",helptitle:"Get help about ICSM",helpalttext:"Get help about ICSM",skiptocontenttitle:"Skip to content",skiptocontent:"Skip to content",quicklinksurl:"/search/api/quickLinks/json?lang=en-US"};return{transclude:!0,restrict:"EA",templateUrl:"icsm/header/header.html",scope:{current:"=",breadcrumbs:"=",heading:"=",headingtitle:"=",helpurl:"=",helptitle:"=",helpalttext:"=",skiptocontenttitle:"=",skiptocontent:"=",quicklinksurl:"="},link:function(e,n,r){angular.copy(t);angular.forEach(t,function(t,n){n in e||(e[n]=t)})}}}]).factory("headerService",["$http",function(){}]);var HelpCtrl=function(t,e){var n=this;t.info("HelpCtrl"),e.getFaqs().then(function(t){n.faqs=t})},HelpService=function(t){var e="icsm/resources/config/faqs.json";return{getFaqs:function(){return t.get(e,{cache:!0}).then(function(t){return t.data})}}};angular.module("icsm.help",[]).directive("icsmHelp",[function(){return{templateUrl:"icsm/help/help.html"}}]).directive("icsmFaqs",[function(){return{restrict:"AE",templateUrl:"icsm/help/faqs.html",scope:{faqs:"="},link:function(t){t.focus=function(t){$("#faqs_"+t).focus()}}}}]).controller("HelpCtrl",HelpCtrl).factory("helpService",HelpService),HelpCtrl.$inject=["$log","helpService"],HelpService.$inject=["$http"],!function(){var t=function(t,e){for(var n=t.lat,r=t.lng,i=!1,a=0,o=e.length-1;a<e.length;o=a++){var s=e[a].lat,c=e[a].lng,l=e[o].lat,u=e[o].lng,d=c>r!=u>r&&n<(l-s)*(r-c)/(u-c)+s;d&&(i=!i)}return i};angular.module("icsm.layerswitch",[]).directive("icsmLayerswitch",["$http","configService","mapService",function(e,n,r){return{restrict:"AE",link:function(i){var a,o;n.getConfig("layerSwitch").then(function(n){a=n,e.get(a.extentUrl,{cache:!0}).then(function(e){var n=L.geoJson(e.data),i=n.getLayers()[0];i&&(o=i.getLatLngs()),r.getMap().then(function(e){function n(n){var a=e.getBounds();t({lng:a.getWest(),lat:a.getSouth()},o)&&t({lng:a.getWest(),lat:a.getNorth()},o)&&t({lng:a.getEast(),lat:a.getSouth()},o)&&t({lng:a.getEast(),lat:a.getNorth()},o)?i():r()}function r(){s({outside:!0,inside:!1})}function i(){s({outside:!1,inside:!0})}function s(t){e.eachLayer(function(e){e.options&&e.options["switch"]&&(e.options["switch"]===a.inside&&(e._container.style.display=t.inside?"block":"none"),e.options["switch"]===a.outside&&(e._container.style.display=t.outside?"block":"none"))})}e.on("moveend",n),n()})})})}}}])}(),angular.module("icsm.mapevents",["geo.map"]).directive("icsmMapevents",["icsmMapeventsService",function(t){return{restrict:"AE",link:function(e){t.tickle()}}}]).factory("icsmMapeventsService",["$rootScope","$timeout","configService","mapService",function(t,e,n,r){function i(t){r.getMap().then(function(e){if(s&&e.removeLayer(s),t){var n;n="undefined"!=typeof t.properties.SAMPLE_LONGITUDE?{type:"Point",coordinates:[t.properties.SAMPLE_LONGITUDE,t.properties.SAMPLE_LATITUDE]}:t.geometry,s=L.geoJson({type:"Feature",geometry:n,id:t.id}).addTo(e),t.properties.html&&s.bindPopup(t.properties.html).openPopup()}})}function a(t,n){r.getMap().then(function(r){c&&r.removeLayer(c),t&&(c=L.geoJson(t,{style:function(t){return{opacity:1,clickable:!1,fillOpacity:0,color:"red"}}}).addTo(r),n&&e(function(){var t=c.getBounds();r.fitBounds(t,{animate:!0,padding:L.point(100,100)})},50))})}function o(t,n){r.getMap().then(function(r){l&&r.removeLayer(l),t&&(l=L.geoJson(t,{style:function(t){return{opacity:1,clickable:!1,fillOpacity:0,color:"black"}}}).addTo(r),n&&e(function(){var t=l.getBounds();r.fitBounds(t,{animate:!0,padding:L.point(100,100)})},50))})}var s,c,l,u=n.getConfig("mapConfig");return t.$on("ed.clip.extent.change.out",function(t,e){console.log("FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF")}),t.$on("ed.clip.extent.change.in",function(t,e){console.log("GGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGE")}),t.$on("icsm.bounds.draw",function(t,e){if(!e)return void o(null);var n=e[2],r=e[0],i=e[3],a=e[1];o({type:"Feature",geometry:{type:"Polygon",coordinates:[[[r,a],[n,a],[n,i],[r,i],[r,a]]]},properties:{}},!1)}),t.$on("icsm.bbox.draw",function(t,e){if(!e)return void a(null);var n=e[2],r=e[0],i=e[3],o=e[1];a({type:"Feature",geometry:{type:"Polygon",coordinates:[[[r,o],[n,o],[n,i],[r,i],[r,o]]]},properties:{}},!1)}),t.$on("icsm.poly.draw",function(t,e){a(e,!0)}),u.listenForMarkerEvent&&t.$on(u.listenForMarkerEvent,function(t,e){i(e)}),{tickle:function(){r.getMap().then(function(e){e.on("click",function(n){var r=e.getZoom(),i=n.latlng;t.$broadcast("zoom.to",{zoom:r,latlng:i})})})}}}]),angular.module("icsm.message",[]).directive("icsmMessage",["icsmMessageService",function(t){return{templateUrl:"icsm/message/message.html",link:function(e,n){e.message=t.data}}}]).factory("icsmMessageService",["$timeout",function(t){var e={},n={get data(){return e},wait:function(t){return n.message("wait",t)},info:function(t){return n.message("info",t)},warn:function(t){return n.message("warn",t)},error:function(t){return n.message("error",t)},clear:function(){return n.message(null,null)},message:function(r,i){e.type=r,e.text=i,t(function(){n.removeFlash()},1e5)},flash:function(t){return n.message("flash",t)},removeFlash:function(){e.type=null}};return n}]);var PaneCtrl=function(t){var e=this;t.data().then(function(t){e.data=t})},PaneService=function(){return{add:function(t){},remove:function(t){}}};angular.module("icsm.panes",[]).directive("icsmPanes",["$rootScope","$timeout","mapService",function(t,e,n){return{templateUrl:"icsm/panes/panes.html",transclude:!0,scope:{defaultItem:"@",data:"="},controller:["$scope",function(r){var i=!1;t.$on("side.panel.change",function(t){function n(){var t=document.createEvent("HTMLEvents");t.initEvent("resize",!1,!0),window.dispatchEvent(t)}n(),e(n,100),e(n,200),e(n,300),e(n,500)}),r.view=r.defaultItem,t.$broadcast("view.changed",r.view,null),r.setView=function(e){var a=r.view;r.view===e?(e&&(i=!0),r.view=""):(e||(i=!0),r.view=e),t.$broadcast("view.changed",r.view,a),i&&n.getMap().then(function(t){t._onResize()})},e(function(){t.$broadcast("view.changed",r.view,null)},50)}]}}]).directive("icsmTabs",[function(){return{templateUrl:"icsm/panes/tabs.html",require:"^icsmPanes"}}]).controller("PaneCtrl",PaneCtrl).factory("paneService",PaneService),PaneCtrl.$inject=["paneService"],PaneService.$inject=[],angular.module("icsm.plot",[]).directive("icsmPlot",["$log",function(t){return{restrict:"AE",scope:{line:"="},link:function(e,n,r,i){e.$watch("line",function(e,n){t.info(e)})}}}]),!function(){var t=function(t){var e=isFinite(t.yMax)&&isFinite(t.xMax)&&isFinite(t.yMin)&&isFinite(t.xMin);return e=e&&t.yMax<90&&t.yMin>-90&&t.xMax<=180&&t.xMin>=-180,e=e&&t.yMax>t.yMin&&t.xMax>t.xMin},e=function(t,e){var n="download_email",r={weight:2,opacity:.9,fill:!1,color:"#000000",width:3,clickable:!1};return{showClip:function(e){this.removeClip(e.layer);var n=[[e.yMin,e.xMin],[e.yMax,e.xMax]];e.layer=t.createBounds(n,r),t.showLayer(e.layer)},removeClip:function(e){e&&t.hideLayer(e)},setEmail:function(t){e.setItem(n,t)},getEmail:function(){return e.getItem(n).then(function(t){return t})},submit:function(t,e){var n=t;angular.forEach(e,function(t,e){n=n.replace("${"+e+"}",t)}),$("#launcher")[0].src=n}}},n=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16;return t&&angular.isNumber(t.xMax)&&angular.isNumber(t.xMin)&&angular.isNumber(t.yMax)&&angular.isNumber(t.yMin)&&!i(t,e)&&!r(t)},r=function(t){var e=(t.xMax-t.xMin)*(t.yMax-t.yMin);return e<1e-11||t.xMax<t.xMin},i=function(t,e){var n=Math.abs((t.xMax-t.xMin)*(t.yMax-t.yMin));return e&&n>e},a=function(t,e){function n(t){return angular.isUndefined(t)||""===t||null===t}var r=!1,i=!1;return!(!e||n(t.xMax)||n(t.xMin)||n(t.yMax)||n(t.yMin))&&(i=r=+t.xMax<+e.xMin,r&&(t.xMax=+e.xMin),r=+t.xMax>+e.xMax,i=i||r,r&&(t.xMax=+e.xMax),r=+t.xMin<+e.xMin,i=i||r,r&&(t.xMin=+e.xMin),r=+t.xMin>+t.xMax,i=i||r,r&&(t.xMin=t.xMax),r=+t.yMax<+e.yMin,i=i||r,r&&(t.yMax=+e.yMin),r=+t.yMax>+e.yMax,i=i||r,r&&(t.yMax=+e.yMax),r=+t.yMin<+e.yMin,i=i||r,r&&(t.yMin=+e.yMin),r=+t.yMin>+t.yMax,i=i||r,r&&(t.yMin=+t.yMax),i)};angular.module("product.download",[]).directive("productDownloadButton",["configService",function(t){return{template:"<button ng-click='item.showDownload = !item.showDownload' type='button' class='undecorated' title='Click to start download'><i class='fa fa-lg fa-download' ng-class='{active:item.showDownload}'></i></button>",scope:{item:"="},link:function(t,e,n){console.log("What's up item!")}}}]).directive("productDownloadPanel",["$rootScope","productDownloadService","flashService",function(e,r,i){return{templateUrl:"icsm/products/download.html",scope:{item:"="},link:function(i,o,s){i.processing={clip:{},get valid(){return this.validClipSize&&this.validEmail},get validClip(){return t(this.clip)},get validClipSize(){return t(this.clip)&&n(this.clip,i.item.restrictSize)},get validEmail(){return this.email},get validProjection(){return this.outCoordSys},get validFormat(){return this.outFormat},get percentComplete(){return(this.validClip?25:0)+(this.validEmail?25:0)+(this.validProjection?25:0)+(this.validFormat?25:0)}},i.item.processing=i.processing,i.drawn=function(){return draw()},e.$on("icsm.clip.drawn",function(t,e){i.processing.clip={xMax:e.xMax,xMin:e.xMin,yMax:e.yMax,yMin:e.yMin},i.processing.message="",i.processing.validClip?(a(i.processing.clip,i.item.bounds)&&(i.processing.message="Bounds restricted to fit within product's extent"),n(i.processing.clip,i.item.restrictSize)||(i.processing.message="That exceeds the area you can clip for this dataset. Restrict to "+i.item.restrictSize+" square degrees.")):i.processing.message="That is not a valid area for this dataset"}),i.$watch("item.showDownload",function(t,e){t&&!i.processing.email&&r.getEmail().then(function(t){i.processing.email=t})})}}}]).directive("productDownloadSubmit",["configService","productDownloadService","messageService",function(t,e,n){return{templateUrl:"icsm/products/submit.html",scope:{item:"=",processing:"="},link:function(t,r,i){t.submit=function(){var r=t.processing;e.setEmail(r.email),e.submit(t.item.template,{id:t.item.primaryId,yMin:r.clip.yMin,yMax:r.clip.yMax,xMin:r.clip.xMin,xMax:r.clip.xMax,outFormat:r.outFormat.code,outCoordSys:r.outCoordSys.code,email:r.email,filename:""}),n.success("Submitted your job. An email will be delivered on completion.")}}}}]).factory("productDownloadService",e),e.$invoke=["productsMapUtilsService","persistService"]}(),!function(){var t=function(t,e){return e&&t&&angular.isNumber(e.xMin)&&angular.isNumber(e.xMax)&&angular.isNumber(e.yMin)&&angular.isNumber(e.yMax)?t.filter(function(t){return!t.extent||t.extent.xMin<=e.xMin&&t.extent.xMax>=e.xMax&&t.extent.yMin<=e.yMin&&t.extent.yMax>=e.yMax}):t};angular.module("icsm.product",["product.download"]).directive("productProjection",["productsConfigService",function(t){return{templateUrl:"icsm/products/projection.html",scope:{processing:"="},link:function(e){t.config.then(function(t){e.config=t})}}}]).directive("productFormats",["productsConfigService",function(t){return{templateUrl:"icsm/products/formats.html",scope:{processing:"="},link:function(e){t.config.then(function(t){e.config=t}),console.log("What's up doc!")}}}]).directive("productEmail",[function(){return{templateUrl:"icsm/products/email.html",scope:{processing:"="}}}]).filter("productIntersect",function(){return t})}();var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();!function(){angular.module("icsm.products",["icsm.product"]).provider("productsConfigService",[function(){var e="icsm/resources/config/download.json";this.setLocation=function(t){e=t},this.$get=["$http",function(n){return new t(e,n)}]}]);var t=function(){function t(e,n){_classCallCheck(this,t),this.$http=n,this.location=e}return _createClass(t,[{key:"child",value:function(t){return this.config.then(function(e){return e[t]})}},{key:"initiateServiceTemplates",get:function(){return child("initiateServiceTemplates")}},{key:"processingTemplates",get:function(){return this.child("processing")}},{key:"outputFormat",get:function(){return this.child("outFormat")}},{key:"defaultOutputFormat",get:function(){return this.outputFormat.then(function(t){return t.find(function(t){return t["default"]})})}},{key:"defaultOutputCoordinateSystem",get:function(){return this.outputCoordinateSystem.then(function(t){return t.find(function(t){return t["default"]})})}},{key:"outputCoordinateSystem",get:function(){return this.child("outCoordSys")}},{key:"datasets",get:function(){return this.child("datasets")}},{key:"config",get:function(){return this.$http.get(this.location,{cache:!0}).then(function(t){return t.data})}}]),t}()}(),angular.module("elvis.results.continue",[]).directive("icsmSearchContinue",["continueService",function(t){return{templateUrl:"icsm/results/continue.html",controller:"listCtrl",controllerAs:"ctrl",link:function(e,n){e.data=t.data}}}]).factory("continueService",["listService",function(t){var e={};return e.data=t.data,e}]).filter("someSelected",function(){return function(t){return t&&t.some(function(t){return t.selected})}}).filter("countSelected",function(){return function(t){return t?t.filter(function(t){return t.selected}).length:""}}),!function(){var t=function(t){var e=1e6,n=1e3*e,r=1e3*n;return t?(""+t).indexOf(" ")>-1?t:(t=parseFloat(t),t<1e3?t+" bytes":t<e?(t/1e3).toFixed(1)+" kB":t<n?(t/e).toFixed(1)+" MB":t<r?(t/n).toFixed(1)+" GB":(t/r).toFixed(1)+" TB"):"-"},e=function(t){this.service=t,this.checkChildren=function(t){var e=this.childrenChecked(t),n=t;e||(n=t.filter(function(t){return t.matched})),n.forEach(function(t){e?delete t.selected:t.selected=!0})},this.childrenChecked=function(t){return!t.filter(function(t){return t.matched}).some(function(t){return!t.selected})},this.someMatches=function(t){var e=!1;return angular.forEach(t.downloadables,function(t){angular.forEach(t,function(t){e|=t.some(function(t){return t.matched})})}),e},this.someChildMatches=function(t){var e=!1;return angular.forEach(group,function(t){e|=t.some(function(t){return t.matched})}),e},this.review=function(){this.service.data.reviewing=!0},this.cancelReview=function(){this.service.data.reviewing=!1}};angular.module("elvis.results",["elvis.results.continue","icsm.subtype","icsm.unreleased"]).directive("productsDialog",["productsConfigService","listService",function(t,e){return{restrict:"AE",link:function(n){var r=n.processing=e.data;t.defaultOutputCoordinateSystem.then(function(t){return r.outCoordSys=t}),t.defaultOutputFormat.then(function(t){return r.outFormat=t})}}}]).directive("icsmOrgHeading",[function(){return{templateUrl:"icsm/results/orgheading.html",restrict:"AE",scope:{org:"=",mappings:"="}}}]).directive("icsmList",["$rootScope","listService",function(t,e){return{templateUrl:"icsm/results/results.html",link:function(n){function r(t){return angular.isArray(t)||!t?t:t.split(/,\s*/g).map(function(t){return+t})}e.getMappings().then(function(t){n.mappings=t}),n.filters=e.data,n.update=function(){var t=!!n.filters.filter,e=n.filters.types.some(function(t){return t.selected})&&!n.filters.types.every(function(t){return t.selected});if(n.products.forEach(function(e){e.matched=!t}),e&&n.products.forEach(function(t){t.matched=!1,n.filters.types.filter(function(t){return t.selected}).forEach(function(e){e.match&&e.match[t.type]?t.matched=!0:e.noMatch&&!e.noMatch[t.type]&&(t.matched=!0)})}),t){var r=n.filters.filter.toUpperCase(),i=n.products;e&&(i=i.filter(function(t){return t.matched})),i.forEach(function(t){var e=t.file_name||t.project_name||"";t.matched=e.toUpperCase().indexOf(r)>-1})}n.$broadcast("filter.changed")},n.show=function(e){var n=r(e.bbox);t.$broadcast("icsm.bbox.draw",n)},n.hide=function(e){t.$broadcast("icsm.bbox.draw",null)},t.$on("clip.initiate.draw",function(t,e){n.list=null,n.products=[],n.productsMap=[]}),t.$on("site.selection",function(t,r){n.list=null,n.products=[],n.productsMap=[],r.available_data&&(n.list=r.available_data.filter(function(t){return t.downloadables}),n.list.forEach(function(t){angular.forEach(t.downloadables,function(e,r){angular.forEach(e,function(e,i){e.forEach(function(e){e.source=t.source,e.group=i,e.type=r,n.productsMap[e.file_url]=e,n.products.push(e)})})})}),e.products=n.products),n.update()}),n.show=function(e){var n=r(e.bbox);t.$broadcast("icsm.bbox.draw",n)},n.hide=function(e){t.$broadcast("icsm.bbox.draw",null)}}}}]).directive("icsmAbstract",["listService",function(t){return{templateUrl:"icsm/results/abstractbutton.html",scope:{item:"="},link:function(e){function n(){e.fetched||(e.fetched=!0,t.getMetadata(e.item).then(function(t){e.item.metadata=t}))}e.show=t.hasMetadata(e.item),e.toggle=function(){e.item.showAbstract=!e.item.showAbstract,e.item.showAbstract&&n()}}}}]).directive("icsmAbstractHover",["$timeout","listService",function(t,e){var n=250;return{restrict:"AE",scope:{item:"="},link:function(r,i){function a(){r.fetched||(r.fetched=!0,e.getMetadata(r.item).then(function(t){r.item.metadata=t}))}var o;i.on("mouseenter",function(){o&&t.cancel(o),o=t(a,n)}),i.on("mouseleave",function(){o&&(t.cancel(o),o=null)})}}}]).directive("icsmAbstractLink",["$timeout","listService",function(t,e){return{restrict:"AE",template:"<a target='_blank' ng-if='url' ng-href='{{url}}'>{{item[name]}}</a><span ng-if='!url' ng-bind='item.file_name'></span>",scope:{item:"=",name:"@?"},link:function(t,n){t.name||(t.name="file_name");var r={file_name:t.item[t.name],metadata_url:t.item.metadata_url,source:t.item.source};t.url=e.getLink(r)}}}]).controller("listCtrl",e).factory("listService",["$http","$rootScope",function(t,e){var n={},r=new Strategies(t);return n.data={id:"listService_data",filter:"",types:[]},e.$on("icsm.clip.drawn",function(t,e){return n.data.clip=e}),t.get("icsm/resources/config/filetypes.json").then(function(t){n.data.typesMap=t.data,n.data.types=[],angular.forEach(t.data,function(t,e){n.data.types.push(t)})}),n.getMetadata=function(t){return r.strategy(t.source).requestMetadata(t)},n.hasMetadata=function(t){return r.strategy(t.source).hasMetadata(t)},n.getLink=function(t){return r.strategy(t.source).constructLink(t)},n.getMappings=function(){return t.get("icsm/resources/config/list.json").then(function(t){return t.data})},n}]).filter("allowedTypes",["listService",function(t){return function(e){if(!t.data.types.some(function(t){return t.selected}))return e;var n={};return angular.forEach(e,function(e,r){t.data.typesMap&&t.data.typesMap[r]&&t.data.typesMap[r].selected&&(n[r]=e)}),n}}]).filter("countMatchedDownloadables",function(){return function(t){if(t){var e=0;return angular.forEach(t,function(t,n){Array.isArray(t)||angular.forEach(t,function(t){e+=t.filter(function(t){return t.matched}).length})}),e}return"-"}}).filter("countMatchedItems",function(){return function(t){return t?t.filter(function(t){return t.matched}).length:""}}).filter("hasTypeMatches",function(){return function(t){if(!t)return!1;var e=0;return Object.keys(t).forEach(function(n){e+=t[n].filter(function(t){return t.matched}).length}),e>0}}).filter("matchedTypes",function(){return function(t){var e={};return angular.forEach(t,function(t,n){t.some(function(t){return t.matched})&&(e[n]=t)}),e}}).filter("matchedGroups",[function(){return function(t){var e={};return t&&angular.forEach(t,function(t,n){t.some(function(t){return t.matched})&&(e[n]=t)}),e}}]).filter("matchedItems",function(){return function(t){return t.filter(function(t){return t.matched})}}).filter("keysLength",[function(){return function(t){return t?Object.keys(t).reduce(function(e,n){return e+t[n].length},0):0}}]).filter("countDownloadables",function(){return function(t){if(t){var e=0;return angular.forEach(t,function(t,n){angular.forEach(t,function(t,n){e+=t.length})}),e}return"-"}}).filter("fileSize",function(){return t}),e.$inject=["listService"],e.prototype={get products(){return this.service.products},get selectedSize(){var t=this.service.products;return(t?t.filter(function(t){return t.selected&&!t.removed}):[]).map(function(t){return t.file_size?+t.file_size:5e8}).reduce(function(t,e){return t+e},0)},get selected(){var t=this.service.products;return t?t.filter(function(t){return t.selected&&!t.removed}):[]}}}(),!function(){var t=function(t){return angular.isArray(t)||!t?t:t.split(/,\s*/g).map(function(t){return+t})};angular.module("icsm.subtype",["bw.paging"]).directive("subtype",["$rootScope",function(e){return{templateUrl:"icsm/results/subtype.html",scope:{items:"=",mappings:"="},link:function(n){n.paging={page:1,pageSize:20},n.$on("filter.changed",function(){console.log("Filter changed - Subtype"),n.setPage(1,20)}),n.setPage=function(t,e){var r=n.items.filter(function(t){return t.matched});n.data=r.slice(e*(t-1),t*e)},n.setPage(1,20),n.show=function(n){var r=t(n.bbox);e.$broadcast("icsm.bbox.draw",r)},n.hide=function(t){e.$broadcast("icsm.bbox.draw",null)}}}}]).filter("hasProducts",function(){return function(t){return t.some(function(t){return t.product})}})}(),!function(){var t=function(t){if(!t)return t;var n=t.split(" - ");return 2!==n.length?t:e(n[0])+" - "+e(n[1])},e=function(t){return 8!==t.length?t:t.substr(0,4)+"/"+t.substr(4,2)+"/"+t.substr(6,2)},n=function(t){return angular.isArray(t)||!t?t:t.split(/,\s*/g).map(function(t){return+t})};angular.module("icsm.unreleased",[]).directive("icsmUnreleased",["$rootScope",function(t){return{templateUrl:"icsm/results/unreleased.html",scope:{types:"="},link:function(e){console.log("Unrelease me!"),e.show=function(e){var r=n(e.bbox);t.$broadcast("icsm.bbox.draw",r)},e.hide=function(e){t.$broadcast("icsm.bbox.draw",null)}}}}]).directive("icsmProjectAbstract",["listService",function(t){return{templateUrl:"icsm/results/abstractbutton.html",scope:{project:"="},link:function(e){function n(){e.fetched||(e.fetched=!0,t.getMetadata(e.item).then(function(t){e.item.metadata=t}))}e.item={},e.show=t.hasMetadata(e.item),e.toggle=function(){e.item.showAbstract=!e.item.showAbstract,e.item.showAbstract&&n()}}}}]).filter("captured",function(){return t}).filter("reverseDate",function(){return e})}(),!function(){var t=function(t,n,r,i,a,o){function s(){i(function(){g._executeQuery();
},100)}var c,l="Search Layers",u="icsm/resources/config/select.json",d={text:"",daterange:{enabled:!1,upper:null,lower:null},bbox:{fromMap:!0,intersects:!0,yMax:null,yMin:null,xMax:null,xMin:null},defaultKeywords:[],keywords:[]},p={},m="#ff7800",f="darkblue",g={getSelectCriteria:function(){return d},getLayerGroup:function(){return c||(c=a.getGroup(l)),c},setKeywords:function(t){},setFilter:function(t){},refresh:function(){},getDaterange:function(){return d.daterange},more:function(){},_executeQuery:function(){t.get(u,{cache:!0}).then(function(t){g.getLayerGroup();var e=t.data;e.response.docs.forEach(function(t){g._decorateDataset(t),"group"==t.type&&t.docs.forEach(function(t){g._decorateDataset(t)})}),r.$broadcast("select.facet.counts",e),r.$broadcast("select.results.received",e)})},createLayer:function(t,e){var n,r,i,a=t.bbox,o=t.primaryId;if(i=p[o],!i){if(!a)return null;if(n=a.split(" "),4!=n.length)return null;e||(e=m),r=[[+n[1],+n[0]],[+n[3],+n[2]]],i=L.rectangle(r,{fill:!1,color:"#000000",width:3,clickable:!1}),p[o]=i}return this._decorateDataset(t),c.addLayer(i),i},_decorateDataset:function(t){function n(t){var e;return t?(e=t.split(/\s/g),{xMin:+e[0],xMax:+e[2],yMax:+e[3],yMin:+e[1]}):null}var r=p[t.primaryId];r?(t.layer=r,t.showLayer=!0):(t.layer=null,t.showLayer=!1,t.services=e(t.dcUris),t.bounds=n(t.bbox))},showWithin:function(t){function e(t,e,n,r){var i=d.bbox;return t>i.xMin&&n<i.xMax&&e>i.yMin&&r<i.yMax}t.forEach(function(t){var n,r=t.bbox;r?(n=r.split(" "),4==n.length&&e(+n[0],+n[1],+n[2],+n[3])?g.createLayer(t):g.removeLayer(t)):g.removeLayer(t)})},toggle:function(t){t.showLayer?this.removeLayer(t):this.createLayer(t)},toggleAll:function(t){var e=this,n=t.some(function(t){return!t.showLayer});return t.forEach(function(t){n?t.showLayer||e.createLayer(t):t.showLayer&&e.removeLayer(t)}),!n},hideAll:function(t){t.forEach(function(t){t.showLayer&&g.removeLayer(t)})},hilight:function(t){t.setStyle({color:f})},lolight:function(t){t.setStyle({color:m})},removeLayer:function(t){var e=t.primaryId,n=p[e];n&&(c.removeLayer(n),delete p[e]),this._decorateDataset(t)}};return s(),g},e=function(t){function e(t){this.uris=t,this.container={wcs:null,wms:null},t?this.services=t.map(function(t){var e=new n(t);return this.container.wcs=e.isWcs()?e:this.container.wcs,this.container.wms=e.isWms()?e:this.container.wms,e}.bind(this)):this.services=[],this.hasWcs=function(){return null!==this.container.wcs},this.hasWms=function(){return null!==this.container.wms},this.getWcs=function(){return this.container.wcs},this.getWms=function(){return this.container.wms},this.remove=function(){this.services.forEach(function(t){t.remove()})}}function n(t){var e=$(t);this.protocol=e.attr("protocol"),this.url=e.text(),this.layerNames=e.attr("layerNames"),this.name=e.attr("name"),this.description=e.attr("description"),this.handlers=[],this.isWcs=function(){return this.protocol==r.WCS},this.isWfs=function(){return this.protocol==r.WFS},this.isWms=function(){return this.protocol==r.WMS},this.isSupported=function(){return"undefined"==typeof r[this.protocol]},this.addHandler=function(t){this.handlers.push(t)},this.removeHandler=function(t){this.handlers.push(t)},this.remove=function(){this.handlers.forEach(function(t){this.callback.remove&&t.remove(this)}.bind(this)),this.handlers=[]}}var r={WCS:"OGC:WCS",WFS:"OGC:WFS",WMS:"OGC:WMS"};return n.prototype={getUrl:function(){return url?url.indexOf("?")<0?void 0:url.substr(0,url.indexOf("?")):null}},new e(t)};angular.module("icsm.select.service",[]).factory("selectService",t),t.$inject=["$http","$q","$rootScope","$timeout","mapService","configService"]}();var SelectCriteriaCtrl=function(t){this.criteria=t.getSelectCriteria(),this.refresh=function(){t.refresh()}},SelectCtrl=function(t,e,n,r){var i,a=this;t.$on("select.results.received",function(t,e){n.remove(i),a.data=e}),e.getConfig("facets").then(function(t){this.hasKeywords=t&&t.keywordMapped&&t.keywordMapped.length>0}.bind(this)),this.select=function(){n.remove(i),i=n.add("Selecting",3e3,!0),r.setFilter(this.filter)},this.toggle=function(t){r.toggle(t)},this.toggleAll=function(){r.toggleAll(this.data.response.docs)},this.showWithin=function(){r.showWithin(this.data.response.docs)},this.allShowing=function(){return!(!this.data||!this.data.response)&&!this.data.response.docs.some(function(t){return!t.showLayer})},this.anyShowing=function(){return!(!this.data||!this.data.response)&&this.data.response.docs.some(function(t){return t.showLayer})},this.hideAll=function(){r.hideAll(this.data.response.docs)},this.hilight=function(t){t.layer&&r.hilight(t.layer)},this.lolight=function(t){t.layer&&r.lolight(t.layer)}};angular.module("icsm.select",["icsm.select.service"]).controller("SelectCtrl",SelectCtrl).controller("SelectCriteriaCtrl",SelectCriteriaCtrl).directive("icsmSelect",[function(){return{templateUrl:"icsm/select/select.html",link:function(t,e,n){}}}]).directive("selectDoc",[function(){return{templateUrl:"icsm/select/doc.html",link:function(t,e,n){}}}]).directive("selectGroup",[function(){return{templateUrl:"icsm/select/group.html",scope:{group:"="},link:function(t,e,n){}}}]).filter("pubDate",function(){return function(t){var e;return t?(e=new Date(t),e.getDate()+"/"+(e.getMonth()+1)+"/"+e.getFullYear()):"-"}}).filter("authors",function(){return function(t){return t?t.join(", "):"-"}}).filter("truncate",function(){return function(t,e){return t&&t.length>e-3?t.substr(0,e-3)+"...":t}}),SelectCriteriaCtrl.$inject=["selectService"],SelectCtrl.$inject=["$rootScope","configService","flashService","selectService"],angular.module("icsm.splash",[]).directive("icsmSplash",["$rootScope","$uibModal","$log","splashService",function(t,e,n,r){return{controller:["$scope","splashService",function(t,e){t.acceptedTerms=!0,e.getReleaseNotes().then(function(n){t.releaseMessages=n,t.acceptedTerms=e.hasViewedSplash()})}],link:function(i,a){var o;i.$watch("acceptedTerms",function(t){t===!1&&(o=e.open({templateUrl:"icsm/splash/splash.html",size:"lg",backdrop:"static",keyboard:!1,controller:["$scope","$uibModalInstance","acceptedTerms","messages",function(t,e,n,r){t.acceptedTerms=n,t.messages=r,t.accept=function(){e.close(!0)}}],resolve:{acceptedTerms:function(){return i.acceptedTerms},messages:function(){return i.releaseMessages}}}),o.result.then(function(t){n.info("Accepted terms"),i.acceptedTerms=t,r.setHasViewedSplash(t)},function(){n.info("Modal dismissed at: "+new Date)}))}),t.$on("logoutRequest",function(){userService.setAcceptedTerms(!1)})}}}]).factory("splashService",["$http",function(t){function e(t){t?sessionStorage.setItem(r,!0):sessionStorage.removeItem(r)}function n(){return!!sessionStorage.getItem(r)}var r="icsm.accepted.terms",i="icsm/resources/service/releaseNotes";return{getReleaseNotes:function(){return t({method:"GET",url:i+"?t="+Date.now()}).then(function(t){return t.data})},hasViewedSplash:n,setHasViewedSplash:e}}]).filter("priorityColor",[function(){var t={IMPORTANT:"red",HIGH:"blue",MEDIUM:"orange",LOW:"gray"};return function(e){return e in t?t[e]:"black"}}]).filter("wordLowerCamel",function(){return function(t){return t.charAt(0)+t.substr(1).toLowerCase()}}).filter("sortNotes",[function(){return function(t){if(t){var e=t.slice(0).sort(function(t,e){return t.priority==e.priority?t.lastUpdate==e.lastUpdate?0:e.lastUpdate-t.lastUpdate:"IMPORTANT"==t.priority?-11:1});return e}}}]),!function(){var t=function(t){var e=["file_url","file_name","project_name","product","metadata_id","file_size","bbox"],n={available_data:[]},r=n.available_data,i={};return t.forEach(function(t){var n={};e.forEach(function(e){"undefined"!=typeof t[e]&&(n[e]=t[e])});var a=i[t.source];a||(a={source:t.source,downloadables:{}},i[t.source]=a,r.push(a));var o=a.downloadables[t.type];o||(o={},a.downloadables[t.type]=o);var s=o[t.group];s||(s=[],o[t.group]=s),s.push(n)}),n};angular.module("elvis.reviewing",[]).directive("icsmReview",["$rootScope","$uibModal","$log","messageService","reviewService",function(e,n,r,i,a){return{link:function(e,o){var s;e.data=a.data,e.$watch("data",function(t,n){n&&(console.log("Why?",t),e.data=a.data)}),e.$watch("data.reviewing",function(o){o&&(s=n.open({templateUrl:"icsm/reviewing/reviewing.html",size:"lg",backdrop:"static",keyboard:!1,controller:["$scope","$uibModalInstance","listService","products",function(e,n,r,i){r.getMappings().then(function(t){e.mappings=t}),e.products=t(i.filter(function(t){return t.selected})).available_data,e.accept=function(){n.close(!0,e.products)},e.cancel=function(){n.close(!1)}}],resolve:{products:function(){return a.products}}}),s.result.then(function(t){t&&a.startExtract().then(function(t){i[t.status](t.message),a.removeRemoved(),e.data.reviewing=!1}),a.removeRemoved(),e.data.reviewing=!1},function(){r.info("Cancelled")}))})}}}]).directive("reviewEmail",["reviewService",function(t){return{template:'<div class="input-group"><span class="input-group-addon" id="nedf-email">Email</span><input required="required" type="email" ng-model="data.email" class="form-control" placeholder="Email address to send download link" aria-describedby="nedf-email"></div>',restrict:"AE",link:function(e,n){e.data=t.data}}}]).filter("reviewProductsSelected",function(){return function(t){return t.filter(function(t){return t.selected})}}).filter("reviewSumSize",function(){return function(t){return t.reduce(function(t,e){return t+(e.file_size?+e.file_size:e.product?5e8:0)},0)}}).factory("reviewService",["$http","$q","clipService","configService","listService","persistService",function(e,n,r,i,a,o){var s="elvis_download_email",c=a.data,l={get data(){return c},set data(t){console.log("What the hell!")},get products(){return a.products},startExtract:function(){var n=r.data.clip;return this.setEmail(c.email),i.getConfig("processing").then(function(r){function i(){return{status:"success",message:"Your job has been submitted. You will receive an email with the results soon."}}function o(){var o=t(a.products.filter(function(t){return t.selected||"Unreleased Data"===t.type}));return o.parameters={xmin:n.xMin,xmax:n.xMax,ymin:n.yMin,ymax:n.yMax,email:c.email},c.outCoordSys&&(o.parameters.outCoordSys=c.outCoordSys.code),c.outFormat&&(o.parameters.outFormat=c.outFormat.code),a.products.forEach(function(t){t.selected=t.removed=!1}),e({method:"POST",url:r.postProcessingUrl,data:o,headers:{"Content-Type":"application/json"}}).then(function(t){return i()},function(t){return{status:"error",message:"Sorry but the service failed to respond. Try again later."}})}return console.log("We are processing files"),o()})},removeRemoved:function(){a.products.forEach(function(t){t.removed=!1})},setEmail:function(t){this.data.email=t,o.setItem(s,t)},clipProduct:function(){}};return o.getItem(s).then(function(t){l.data.email=t}),l}])}(),angular.module("icsm.state",[]).directive("icsmStateToggle",["downloadService",function(t){return{restrict:"AE",template:'<button ng-click="toggle(false)" ng-disabled="state.show" class="btn btn-default" title="Start downlaod selection."><i class="fa fa-lg fa-object-group"></i></button>',link:function(e){t.data().then(function(t){e.state=t}),e.toggle=function(){e.state.show=!e.state.show}}}}]);var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),_get=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,r)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(r)},BaseStrategy=function(){function t(e){_classCallCheck(this,t),this.http=e,this.NO_METADATA="No metadata found for this dataset."}return _createClass(t,[{key:"constructLink",value:function(t){return null}},{key:"hasMetadata",value:function(t){return!1}},{key:"requestMetadata",value:function(e){return t.resolvedPromise({title:this.NO_METADATA})}}],[{key:"resolvedPromise",value:function(t){var e={then:function(t){this.fn=t}};return setTimeout(function(){e.fn&&e.fn(t)},1),e}},{key:"extractData",value:function(e){var n=e.MD_Metadata,r={},i=n&&n.identificationInfo&&n.identificationInfo.MD_DataIdentification,a=i;if(i=i&&i.citation&&i.citation.CI_Citation,i=i&&i.title&&i.title.CharacterString){r.title=i.__text;var o=a&&a["abstract"]&&a["abstract"].CharacterString&&a["abstract"].CharacterString.__text;r["abstract"]=r.abstractText=o}else r.title=_get(t.__proto__||Object.getPrototypeOf(t),"NO_METADATA",this);return r}}]),t}(),UnknownStrategy=function(t){function e(t){return _classCallCheck(this,e),_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return _inherits(e,t),e}(BaseStrategy),ActStrategy=function(t){function e(t){return _classCallCheck(this,e),_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return _inherits(e,t),e}(BaseStrategy),GaStrategy=function(t){function e(t){_classCallCheck(this,e);var n=_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.GA_LINK_METADATA_TEMPLATE="https://ecat.ga.gov.au/geonetwork/srv/eng/search#!${uuid}",n.GA_METADATA_TEMPLATE="https://ecat.ga.gov.au/geonetwork/srv/eng/xml.metadata.get?uuid=${uuid}",n.UUID_REG_EX=/[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}/,n}return _inherits(e,t),_createClass(e,[{key:"constructLink",value:function(t){var e=t.metadata_id;return e?this.GA_LINK_METADATA_TEMPLATE.replace("${uuid}",e):null}},{key:"hasMetadata",value:function(t){return!!this.constructLink(t)}},{key:"requestMetadata",value:function(t){var e=this,n=t.metadata_id,r=n?"xml2js/"+this.GA_METADATA_TEMPLATE.replace("${uuid}",n):null;return r?this.http.get(r).then(function(t){return BaseStrategy.extractData(t.data)},function(t){return{title:e.NO_METADATA}}):BaseStrategy.resolvedPromise({title:this.NO_METADATA})}}]),e}(BaseStrategy),NswStrategy=function(t){function e(t){_classCallCheck(this,e);var n=_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.NSW_METADATA_TEMPLATE="https://s3-ap-southeast-2.amazonaws.com/nsw.elvis/z5${zone}/Metadata/",n}return _inherits(e,t),_createClass(e,[{key:"constructLink",value:function(t){var e=t.file_name,n=/\_5\d\_/,r=e.search(n),i=6,a=this.NSW_METADATA_TEMPLATE;return r!==-1&&(i=e.substr(r+2,1)),a.replace("${zone}",i)+e.replace(".zip","_Metadata.html")}},{key:"hasMetadata",value:function(t){return!0}},{key:"requestMetadata",value:function(t){var n=this,r=t.file_name,i=/\_5\d\_/,a=r.search(i),o=6,s=this.NSW_METADATA_TEMPLATE;return a!==-1&&(o=r.substr(a+2,1)),s="xml2js/"+s.replace("${zone}",o)+r.replace(".zip","_Metadata.xml"),this.http.get(s).then(function(t){return BaseStrategy.extractData(t.data)},function(t){return{title:_get(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"NO_METADATA",n)}})}}]),e}(BaseStrategy),NtStrategy=function(t){function e(t){return _classCallCheck(this,e),_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return _inherits(e,t),e}(BaseStrategy),QldStrategy=function(t){function e(t){_classCallCheck(this,e);var n=_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.XML_METADATA_TEMPLATE="http://qldspatial.information.qld.gov.au/catalogue/rest/document?id={metadata_id}&f=xml",n.QLD_METADATA_TEMPLATE="http://qldspatial.information.qld.gov.au/catalogue/rest/document?id={EB442CAB-D714-40D8-82C2-A01CA4661324}&f=xml",n.QLD_HTML_TEMPLATE="http://qldspatial.information.qld.gov.au/catalogue/custom/detail.page?fid={EB442CAB-D714-40D8-82C2-A01CA4661324}",n.FRASER_COAST_METADATA_TEMPLATE="http://qldspatial.information.qld.gov.au/catalogue/rest/document?id={E8CEF5BA-A1B7-4DE5-A703-8161FD9BD3CF}&f=xml",n.FRASER_COAST_HTML_TEMPLATE="http://qldspatial.information.qld.gov.au/catalogue/custom/detail.page?fid={E8CEF5BA-A1B7-4DE5-A703-8161FD9BD3CF}",n.FRASER_COAST_BOUNDS=[152.331,-26.003,153.37,-24.692],n}return _inherits(e,t),_createClass(e,[{key:"constructLink",value:function(t){if(t.metadata_url)return t.metadata_url;var e=t.bbox.split(",").map(function(t){return parseFloat(t.trim())});return e[0]>=this.FRASER_COAST_BOUNDS[0]&&e[1]>=this.FRASER_COAST_BOUNDS[1]&&e[2]<=this.FRASER_COAST_BOUNDS[2]&&e[0]>=this.FRASER_COAST_BOUNDS[3]?this.FRASER_COAST_HTML_TEMPLATE:this.QLD_HTML_TEMPLATE}},{key:"hasMetadata",value:function(t){return!0}},{key:"requestMetadata",value:function(t){var n=this,r=void 0;if(t.metadata_id)r=this.XML_METADATA_TEMPLATE.replace("metadata_id",t.metadata_id);else{r=this.QLD_METADATA_TEMPLATE;var i=t.bbox.split(",").map(function(t){return parseFloat(t.trim())});i[0]>=this.FRASER_COAST_BOUNDS[0]&&i[1]>=this.FRASER_COAST_BOUNDS[1]&&i[2]<=this.FRASER_COAST_BOUNDS[2]&&i[0]>=this.FRASER_COAST_BOUNDS[3]&&(r=this.FRASER_COAST_METADATA_TEMPLATE)}return this.http.get("xml2js/"+r).then(function(t){return BaseStrategy.extractData(t.data)},function(t){return{title:_get(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"NO_METADATA",n)}})}}]),e}(BaseStrategy),SaStrategy=function(t){function e(t){return _classCallCheck(this,e),_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return _inherits(e,t),e}(BaseStrategy),TasStrategy=function(t){function e(t){return _classCallCheck(this,e),_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return _inherits(e,t),e}(BaseStrategy),VicStrategy=function(t){function e(t){return _classCallCheck(this,e),_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return _inherits(e,t),e}(BaseStrategy),WaStrategy=function(t){function e(t){return _classCallCheck(this,e),_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return _inherits(e,t),e}(BaseStrategy),Strategies=function(){function t(e){_classCallCheck(this,t);var n=this.unknown=new UnknownStrategy;this.strategies={"NSW Government":new NswStrategy(e),"VIC Government":n,"SA Government":n,"WA Government":n,"QLD Government":new QldStrategy(e),"ACT Government":n,"NT Government":n,"TAS Government":n,"Geoscience Australia":new GaStrategy(e)}}return _createClass(t,[{key:"strategy",value:function e(t){var e=this.strategies[t];return e?e:this.unknown}}]),t}();angular.module("icsm.themes",[]).directive("icsmThemes",["themesService",function(t){return{restrict:"AE",templateUrl:"icsm/themes/themes.html",link:function(e){t.getThemes().then(function(t){e.themes=t}),t.getCurrentTheme().then(function(t){e.theme=t}),e.changeTheme=function(n){e.theme=n,t.setTheme(n.key)}}}}]).controller("themesCtrl",["themesService",function(t){this.service=t}]).filter("themesFilter",function(){return function(t,e){var n=[];return e?(t&&t.forEach(function(t){t.themes&&t.themes.some(function(t){return t==e.key})&&n.push(t)}),n):t}}).factory("themesService",["$q","configService","storageService",function(t,e,n){var r="icsm.current.theme",i="All",a=[],o=this;return this.themes=[],this.theme=null,n.getItem(r).then(function(t){t||(t=i),e.getConfig("themes").then(function(e){o.themes=e,o.theme=e[t],angular.forEach(e,function(t,e){t.key=e}),a.forEach(function(t){t.resolve(o.theme)})})}),this.getCurrentTheme=function(){if(this.theme)return t.when(o.theme);var e=t.defer();return a.push(e),e.promise},this.getThemes=function(){return e.getConfig("themes")},this.setTheme=function(t){this.theme=this.themes[t],n.setItem(r,t)},this}]),angular.module("elevation.toolbar",[]).directive("elevationToolbar",[function(){return{restrict:"AE",templateUrl:"icsm/toolbar/toolbar.html",controller:"toolbarLinksCtrl",transclude:!0}}]).controller("toolbarLinksCtrl",["$scope","configService",function(t,e){var n=this;e.getConfig().then(function(t){n.links=t.toolbarLinks}),t.item="",t.toggleItem=function(e){t.item=t.item===e?"":e}}]);var DownloadCtrl=function(t){t.data().then(function(t){this.data=t}.bind(this)),this.remove=function(){t.clear()},this.changeEmail=function(e){t.setEmail(e)}},DownloadService=function(t,e,n,r,i){var a="download_email",o="Download Layers",s={zoom:null,center:null,layer:null},c=null,l={getLayerGroup:function(){return r.getGroup(o)},setState:function(t){function e(){[[t.bounds.yMin,t.bounds.xMin],[t.bounds.yMax,t.bounds.xMax]];s.layer&&r.getGroup(o).removeLayer(s.layer)}function n(t){s.layer&&(r.clearGroup(o),s.layer=null)}t?e():n()},decorate:function(){var t=c.item;c.item.download=!0,t.processsing||(t.processing={clip:{xMax:null,xMin:null,yMax:null,yMin:null}})},setEmail:function(t){i.setItem(a,t)},getEmail:function(){return i.getItem(a).then(function(t){return c.email=t,t})},data:function(){return c?e.when(c):t.get("icsm/resources/config/icsm.json").then(function(t){return c=t.data,l.decorate(),c})}};return l};angular.module("icsm.view",[]).directive("icsmView",["downloadService",function(t){return{templateUrl:"icsm/view/view.html",controller:"DownloadCtrl",link:function(e,n){t.data().then(function(t){e.data=t}),e.$watch("data.item",function(e,n){(e||n)&&t.setState(e)})}}}]).controller("DownloadCtrl",DownloadCtrl).factory("downloadService",DownloadService),DownloadCtrl.$inject=["downloadService"],DownloadService.$inject=["$http","$q","$rootScope","mapService","storageService"],angular.module("icsm.templates",[]).run(["$templateCache",function(t){t.put("icsm/app/app.html",'<div>\r\n\t<!-- BEGIN: Sticky Header -->\r\n\t<div explorer-header style="z-index:1"\r\n\t\t\tclass="navbar navbar-default navbar-fixed-top"\r\n\t\t\theading="\'Elevation\'"\r\n\t\t\theadingtitle="\'ICSM\'"\r\n\t\t\tbreadcrumbs="[{name:\'ICSM\', title: \'Reload Elevation\', url: \'.\'}]"\r\n\t\t\thelptitle="\'Get help about Elevation\'"\r\n\t\t\thelpalttext="\'Get help about Elevation\'">\r\n\t</div>\r\n\t<!-- END: Sticky Header -->\r\n\r\n\t<!-- Messages go here. They are fixed to the tab bar. -->\r\n\t<div explorer-messages class="marsMessages noPrint"></div>\r\n\t<icsm-panes data="root.data" default-item="download"></icsm-panes>\r\n</div>'),t.put("icsm/clip/clip.html",'<div class="well well-sm" style="margin-bottom:5px">\r\n\t<div class="container-fluid">\r\n\t\t<div class="row">\r\n\t\t\t<div class="col-md-12" style="padding:0">\r\n\t\t\t\t<div class="" role="group" aria-label="...">\r\n\t\t\t\t\t<button ng-click="initiateDraw()" ng-disable="client.drawing"\r\n                      tooltip-append-to-body="true" tooltip-placement="bottom" uib-tooltip="Enable drawing of a bounding box. On enabling, click on the map and drag diagonally"\r\n\t\t\t\t\t\tclass="btn btn-primary btn-default">Select an area...</button>\r\n\t\t\t\t\t<button ng-click="showInfo = !showInfo" tooltip-placement="bottom" uib-tooltip="Information." style="float:right" class="btn btn-primary btn-default"><i class="fa fa-info"></i></button>\r\n\t\t\t\t</div>\r\n\t\t\t\t<exp-info title="Selecting an area" show-close="true" style="width:450px;position:fixed;top:200px;right:40px" is-open="showInfo">\r\n\t\t\t\t\t<icsm-info-bbox></icsm-info-bbox>\r\n            </exp-info>\r\n            <div class="row" ng-hide="(!clip.xMin && clip.xMin !== 0) || oversize" style="padding-top:7px;">\r\n               <div class="col-md-12 ng-binding">\r\n                  Selected bounds: {{clip.xMin | number : 4}} west,\r\n                     {{clip.yMax | number : 4}} north,\r\n                     {{clip.xMax | number : 4}} east,\r\n                     {{clip.yMin | number : 4}} south\r\n               </div>\r\n            </div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</div>'),t.put("icsm/clip/infobbox.html",'<div class="">\r\n\t<strong style="font-size:120%">Select an area of interest.</strong>\r\n   By hitting the "Select an area..." button an area on the map can be selected with the mouse by clicking a\r\n   corner and while holding the left mouse button\r\n\tdown drag diagonally across the map to the opposite corner.\r\n\t<br/>\r\n\tClicking the "Select an area..." button again allows replacing a previous area selection. <br/>\r\n\t<strong>Notes:</strong>\r\n   <ul>\r\n      <li>The data does not cover all of Australia.</li>\r\n      <li>Restrict a search area to below four square degrees. eg 2x2 or 1x4</li>\r\n   </ul>\r\n\t<p style="padding-top:5px"><strong>Hint:</strong> If the map has focus, you can use the arrow keys to pan the map.\r\n\t\tYou can zoom in and out using the mouse wheel or the "+" and "-" map control on the top left of the map. If you\r\n\t\tdon\'t like the position of your drawn area, hit the "Draw" button and draw a new bounding box.\r\n\t</p>\r\n</div>'),t.put("icsm/glossary/glossary.html",'<div ng-controller="GlossaryCtrl as glossary">\r\n   <div style="position:relative;padding:5px;padding-left:10px;">\r\n      <div class="panel" style="padding:5px;">\r\n         <p style="text-align: left; margin: 10px; font-size: 14px;">\r\n\t         <strong>Glossary</strong>\r\n         </p>\r\n\r\n         <div class="panel-body">\r\n            <table class="table table-striped">\r\n               <thead>\r\n                  <tr>\r\n                     <th>Term</th>\r\n                     <th>Definition</th>\r\n                  </tr>\r\n               </thead>\r\n               <tbody>\r\n                  <tr ng-repeat="term in glossary.terms">\r\n                     <td>{{term.term}}</td>\r\n                     <td>{{term.definition}}</td>\r\n                  </tr>\r\n               </tbody>\r\n            </table>\r\n         </div>\r\n      </div>\r\n   </div>\r\n</div>'),t.put("icsm/contributors/contributors.html",'<span class="contributors" ng-mouseenter="over()" ng-mouseleave="out()"\r\n      ng-class="(contributors.show || contributors.ingroup || contributors.stick) ? \'transitioned-down\' : \'transitioned-up\'">\r\n   <button class="undecorated contributors-unstick" ng-click="unstick()" style="float:right">X</button>\r\n   <div ng-repeat="contributor in contributors.orgs | activeContributors" style="text-align:cnter">\r\n      <a ng-href="{{contributor.href}}" name="contributors{{$index}}" title="{{contributor.title}}" target="_blank">\r\n         <img ng-src="{{contributor.image}}" alt="{{contributor.title}}" class="elvis-logo" ng-class="contributor.class"></img>\r\n      </a>\r\n   </div>\r\n</span>'),t.put("icsm/contributors/show.html",'<a ng-mouseenter="over()" ng-mouseleave="out()" class="contributors-link" title="Click to lock/unlock contributors list."\r\n      ng-click="toggleStick()" href="#contributors0">Contributors</a>'),t.put("icsm/header/header.html",'<div class="container-full common-header" style="padding-right:10px; padding-left:10px">\r\n    <div class="navbar-collapse collapse ga-header-collapse">\r\n        <ul class="nav navbar-nav">\r\n            <li class="hidden-xs"><a href="/"><h1 class="applicationTitle">{{heading}}</h1></a></li>\r\n        </ul>\r\n        <ul class="nav navbar-nav navbar-right nav-icons">\r\n        \t<li role="menuitem" style="padding-right:10px;position: relative;top: -3px;">\r\n              <span class="altthemes-container">\r\n\t               <span>\r\n                     <a title="Location INformation Knowledge platform (LINK)" href="http://fsdf.org.au/" target="_blank">\r\n                        <img alt="FSDF" src="icsm/resources/img/FSDFimagev4.0.png" style="height: 66px">\r\n                     </a>\r\n                  </span>\r\n               </span>\r\n           </li>\r\n        \t<li common-navigation role="menuitem" current="current" style="padding-right:10px"></li>\r\n\t\t\t<li mars-version-display role="menuitem"></li>\r\n\t\t\t<li style="width:10px"></li>\r\n        </ul>\r\n    </div><!--/.nav-collapse -->\r\n</div>\r\n<div class="contributorsLink" style="position: absolute; right:7px; bottom:15px">\r\n      <icsm-contributors-link></icsm-contributors-link>\r\n</div>\r\n<!-- Strap -->\r\n<div class="row">\r\n    <div class="col-md-12">\r\n        <div class="strap-blue">\r\n        </div>\r\n        <div class="strap-white">\r\n        </div>\r\n        <div class="strap-red">\r\n        </div>\r\n    </div>\r\n</div>'),t.put("icsm/help/faqs.html",'<p style="text-align: left; margin: 10px; font-size: 14px;">\r\n   <strong>FAQS</strong>\r\n</p>\r\n\r\n<h5 ng-repeat="faq in faqs"><button type="button" class="undecorated" ng-click="focus(faq.key)">{{faq.question}}</button></h5>\r\n<hr/>\r\n<div class="row" ng-repeat="faq in faqs">\r\n   <div class="col-md-12">\r\n      <h5 tabindex="0" id="faqs_{{faq.key}}">{{faq.question}}</h5>\r\n      <span ng-bind-html="faq.answer"></span>\r\n      <hr/>\r\n   </div>\r\n</div>'),t.put("icsm/help/help.html",'<p style="text-align: left; margin: 10px; font-size: 14px;">\r\n\t<strong>Help</strong>\r\n</p>\r\n\r\n<div class="panel-body" ng-controller="HelpCtrl as help">\r\n\tThe steps to get data!\r\n\t<ol>\r\n\t\t<li>Define area of interest</li>\r\n\t\t<li>Select datasets</li>\r\n\t\t<li>Confirm selections</li>\r\n\t\t<li>Enter email address</li>\r\n\t\t<li>Start extract</li>\r\n\t</ol>\r\n\tAn email will be sent to you on completion of the data extract with a link to your data.\r\n   <hr>\r\n\t<icsm-faqs faqs="help.faqs" ></icsm-faqs>\r\n</div>'),t.put("icsm/message/message.html","<div class=\"well well-sm mess-container\" ng-show=\"message.type && message.text\"\r\n   ng-class=\"{'mess-error': message.type == 'error', 'mess-warn': message.type == 'warn', 'mess-info': (message.type == 'info' || message.type == 'wait')}\">\r\n   <i class=\"fa fa-spinner fa-spin fa-fw\" aria-hidden=\"true\" ng-if=\"message.type == 'wait'\"></i>\r\n   <span>{{message.text}}</span>\r\n</div>"),t.put("icsm/panes/panes.html",'<div class="mapContainer" class="col-md-12" style="padding-right:0"  ng-attr-style="right:{{right.width}}">\r\n   <span common-baselayer-control class="baselayer-slider" max-zoom="16" title="Satellite to Topography bias on base map."></span>\r\n   <div class="panesMapContainer" geo-map configuration="data.map">\r\n      <geo-extent></geo-extent>\r\n      <common-feature-info></common-feature-info>\r\n      <icsm-layerswitch></icsm-layerswitch>\r\n   </div>\r\n   <div class="base-layer-controller">\r\n      <div geo-draw data="data.map.drawOptions" line-event="elevation.plot.data" rectangle-event="bounds.drawn"></div>\r\n   </div>\r\n   <restrict-pan bounds="data.map.position.bounds"></restrict-pan>\r\n</div>'),t.put("icsm/panes/tabs.html",'<!-- tabs go here -->\r\n<div id="panesTabsContainer" class="paneRotateTabs" style="opacity:0.9" ng-style="{\'right\' : contentLeft +\'px\'}">\r\n\r\n   <div class="paneTabItem" style="width:60px; opacity:0">\r\n\r\n   </div>\r\n   <div class="paneTabItem" ng-class="{\'bold\': view == \'download\'}" ng-click="setView(\'download\')">\r\n      <button class="undecorated">Datasets Download</button>\r\n   </div>\r\n   <!--\r\n\t<div class="paneTabItem" ng-class="{\'bold\': view == \'search\'}" ng-click="setView(\'search\')">\r\n\t\t<button class="undecorated">Search</button>\r\n\t</div>\r\n\t<div class="paneTabItem" ng-class="{\'bold\': view == \'maps\'}" ng-click="setView(\'maps\')">\r\n\t\t<button class="undecorated">Layers</button>\r\n\t</div>\r\n   -->\r\n   <div class="paneTabItem" ng-class="{\'bold\': view == \'downloader\'}" ng-click="setView(\'downloader\')">\r\n      <button class="undecorated">Products Download</button>\r\n   </div>\r\n   <div class="paneTabItem" ng-class="{\'bold\': view == \'glossary\'}" ng-click="setView(\'glossary\')">\r\n      <button class="undecorated">Glossary</button>\r\n   </div>\r\n   <div class="paneTabItem" ng-class="{\'bold\': view == \'help\'}" ng-click="setView(\'help\')">\r\n      <button class="undecorated">Help</button>\r\n   </div>\r\n</div>'),t.put("icsm/products/download.html",'<div class="well" ng-show="item.showDownload">\r\n\r\n   <div class="well">\r\n      <div ng-show="processing.validClip" class="product-restrict">\r\n         <span class="product-label">Bounds:</span> {{processing.clip.xMin|number : 4}}&deg; west, {{processing.clip.yMax|number : 4}}&deg; north, {{processing.clip.xMax|number\r\n         : 4}}&deg; east, {{processing.clip.yMin|number : 4}}&deg; south\r\n\r\n         <div ng-show="processing.message" class="product-warning">\r\n            {{processing.message}}\r\n         </div>\r\n      </div>\r\n      <product-projection processing="processing"></product-projection>\r\n      <br/>\r\n      <product-formats processing="processing"></product-formats>\r\n      <br/>\r\n      <product-email processing="processing"></product-email>\r\n   </div>\r\n   <product-download-submit processing="processing" item="item"></product-download-submit>\r\n</div>'),
t.put("icsm/products/email.html",'<div class="input-group">\r\n      <span class="input-group-addon" id="nedf-email">Email</span>\r\n      <input required="required" type="email" ng-model="processing.email" class="form-control" placeholder="Email address to send download link">\r\n   </div>\r\n'),t.put("icsm/products/formats.html",'<div class="row">\r\n      <div class="col-md-4">\r\n         <label for="geoprocessOutputFormat">\r\n                  Output Format\r\n               </label>\r\n      </div>\r\n      <div class="col-md-8">\r\n         <select id="geoprocessOutputFormat" style="width:95%" ng-model="processing.outFormat" ng-options="opt.value for opt in config.outFormat track by opt.code"></select>\r\n      </div>\r\n   </div>'),t.put("icsm/products/projection.html",'<div class="row">\r\n   <div class="col-md-4">\r\n      <label for="geoprocessOutCoordSys">\r\n                  Coordinate System\r\n               </label>\r\n   </div>\r\n   <div class="col-md-8">\r\n      <select id="geoprocessOutCoordSys" style="width:95%" ng-model="processing.outCoordSys" ng-options="opt.value for opt in config.outCoordSys | productIntersect : processing.clip track by opt.code"></select>\r\n   </div>\r\n</div>'),t.put("icsm/products/submit.html",'<div class="well" style="padding-bottom:2px">\r\n   <div class="row">\r\n      <div class="col-md-6" style="padding-top:7px">\r\n         <div class="progress">\r\n            <div class="progress-bar" role="progressbar" aria-valuenow="{{processing.percentComplete}}" aria-valuemin="0" aria-valuemax="100"\r\n               style="width: {{processing.percentComplete}}%;">\r\n               <span class="sr-only">60% Complete</span>\r\n            </div>\r\n         </div>\r\n      </div>\r\n      <div class="col-md-4" style="padding-top:7px">\r\n         <span style="padding-right:10px" uib-tooltip="Draw a valid area to extract data." tooltip-placement="left">\r\n            <i class="fa fa-scissors fa-2x" ng-class="{\'product-valid\': processing.validClipSize, \'product-invalid\': !processing.validClipSize }"></i>\r\n         </span>\r\n         <span style="padding-right:10px" uib-tooltip="Select a valid coordinate system for area." tooltip-placement="left">\r\n            <i class="fa fa-file-video-o fa-2x" ng-class="{\'product-valid\': processing.validProjection, \'product-invalid\': !processing.validProjection}"></i>\r\n         </span>\r\n         <span style="padding-right:10px" uib-tooltip="Select a valid download format." tooltip-placement="left">\r\n            <i class="fa fa-files-o fa-2x" ng-class="{\'product-valid\': processing.validFormat, \'product-invalid\': !processing.validFormat}"></i>\r\n         </span>\r\n         <span style="padding-right:10px" uib-tooltip="Provide an email address." tooltip-placement="left">\r\n            <i class="fa fa-envelope fa-2x" ng-class="{\'product-valid\': processing.validEmail, \'product-invalid\': !processing.validEmail}"></i>\r\n         </span>\r\n      </div>\r\n      <div class="col-md-2">\r\n         <button class="btn btn-primary pull-right" ng-disabled="!processing.valid" ng-click="submit()">Submit</button>\r\n      </div>\r\n   </div>\r\n</div>'),t.put("icsm/results/abstractbutton.html",'<button ng-show="show" type="button" class="undecorated" title="View full title and abstract of this dataset" ng-click="toggle()">\r\n\t<i class="fa fa-lg" ng-class="{\'fa-caret-down active\':item.showAbstract, \'fa-caret-right\':!item.showAbstract}"></i>\r\n</button>'),t.put("icsm/results/abstracttooltip.html","<div>\r\n{{item.metadata.title? item.metadata.title: 'Loading...'}}\r\n</div>"),t.put("icsm/results/continue.html",'<div class="continue-container" ng-show="ctrl.selected.length">\r\n   <button class="btn btn-primary" ng-click="ctrl.review()">Download {{ctrl.selected.length | number}} selected datasets... (Approx: {{ctrl.selectedSize | fileSize}})</button>\r\n</div>\r\n\r\n'),t.put("icsm/results/orgheading.html",'<h5>\r\n   <img ng-src="{{mappings[org.source].image}}" ng-attr-style="height:{{mappings[org.source].height}}px"></img>\r\n      <strong>{{org.source}}</strong> (Showing {{org.downloadables | countMatchedDownloadables | number:0}} of {{org.downloadables\t| countDownloadables | number:0}})\r\n</h5>'),t.put("icsm/results/results.html",'<div ng-show="!list || !list.length">\r\n   <div class="alert alert-warning" role="alert">\r\n      <strong>Select an area</strong> to find datasets within.</div>\r\n</div>\r\n\r\n<div ng-show="list.length" class="results-list">\r\n   <div class="row">\r\n      <div class="col-md-12" uib-tooltip="Number of intersecting or very near datasets to your area of interest.">\r\n         <h4 style="display:inline-block; padding-left:7px">Found {{products.length | number:0}} datasets</h4>\r\n      </div>\r\n   </div>\r\n   <div class="panel panel-default" style="margin-bottom: 5px; margin-top: 0;">\r\n      <div class="panel-body" style="float:clear">\r\n         <span class="filter-text" style="float:left;width:50%">\r\n            <div class="input-group input-group-sm">\r\n               <span class="input-group-addon" id="names1">Filter:</span>\r\n               <input type="text" ng-model="filters.filter" class="form-control" ng-change="update()" placeholder="Filter names" aria-describedby="names1">\r\n            </div>\r\n         </span>\r\n         <span class="filter-type" style="padding:10px; float:right">\r\n            <span class="listTypeLabel">Filter by type:</span>\r\n            <span ng-repeat="type in filters.types" class="listType">\r\n               <input type="checkbox" ng-model="type.selected" ng-change="update()" />\r\n               <span uib-tooltip="{{type.description}}">{{type.label}}</span>\r\n            </span>\r\n         </span>\r\n      </div>\r\n   </div>\r\n\r\n   <div ng-repeat="available in list" class="well" style="padding-left:4px;padding-right:4px" ng-show="list.someMatches(available)"\r\n      ng-controller="listCtrl as list">\r\n      <icsm-org-heading org="available" mappings="mappings"></icsm-org-heading>\r\n      <div>\r\n         <div class="listRow" ng-class-odd="\'listEven\'" ng-repeat="(typeKey, types) in available.downloadables | allowedTypes" ng-show="types | hasTypeMatches">\r\n            <span>\r\n               <h5>{{typeKey}}</h5>\r\n            </span>\r\n\r\n            <div ng-if="typeKey === \'Unreleased Data\'">\r\n               <icsm-unreleased types="types">\r\n            </div>\r\n            <div ng-if="typeKey !== \'Unreleased Data\'">\r\n               <div ng-repeat="(key, items) in types" ng-show="(items | countMatchedItems) != 0">\r\n                  <div>\r\n                     <h5>\r\n                        <button ng-click="list.checkChildren(items)" style="width:7em" class="btn btn-xs btn-default">\r\n                           <span ng-show="!list.childrenChecked(items)">Select all</span>\r\n                           <span ng-show="list.childrenChecked(items)">Deselect all</span>\r\n                        </button>\r\n                        <span uib-tooltip="{{filter.types[key].description}}">{{key}} (Showing {{items | countMatchedItems | number:0}} of {{items.length | number:0}})</span>\r\n\r\n\r\n                        <button class="pull-right undecorated" ng-click="expansions[available.source + \'_\' + key] = !expansions[available.source + \'_\' + key]">\r\n                           [{{expansions[available.source + \'_\' + key]?"hide ":"show "}}{{(items | hasProducts) ? \'products\': \'files\'}}]\r\n                        </button>\r\n                     </h5>\r\n                     <span ng-show="items | hasProducts" products-dialog>\r\n                        <product-projection processing="processing"></product-projection>\r\n                        <product-formats processing="processing"></product-formats>\r\n                     </span>\r\n                  </div>\r\n                  <div ng-show="expansions[available.source + \'_\' + key]">\r\n                     <subtype items="items" mappings="mappings" show="show" hide="hide"></subtype>\r\n                     <div style="text-align:right">\r\n                        <button class="undecorated" ng-click="expansions[available.source + \'_\' + key] = false">[hide {{(items | hasProducts) ? \'products\': \'files\'}}]</button>\r\n                     </div>\r\n                  </div>\r\n               </div>\r\n            </div>\r\n         </div>\r\n      </div>\r\n   </div>\r\n</div>'),t.put("icsm/results/subtype.html",'<div ng-show="(items | matchedItems).length > paging.pageSize"\r\n   paging page="paging.page" page-size="paging.pageSize"\r\n   total="(items | matchedItems).length"\r\n   paging-action="setPage(page, pageSize)">\r\n</div>\r\n<div>\r\n   <div ng-repeat="item in data" icsm-abstract-hover item="item">\r\n      <div tooltip-append-to-body="true" uib-tooltip-template="\'icsm/results/abstracttooltip.html\'" tooltip-popup-delay="400" data-ng-mouseenter="show(item)"\r\n         data-ng-mouseleave="hide(item)">\r\n         <input type="checkbox" ng-model="item.selected" />\r\n         <icsm-abstract item="item"></icsm-abstract>\r\n         <common-cc version="mappings[item.source].ccLicence"></common-cc>\r\n         <span class="listItem" item="item" icsm-abstract-link></span>\r\n         <span ng-show="item.file_size" style="float:right;padding-top:3px">({{item.file_size | fileSize}})</span>\r\n      </div>\r\n      <div ng-show="item.showAbstract" class="well">\r\n         <span ng-show="!item.metadata">\r\n            <i class="fa fa-spinner fa-spin fa-lg fa-fw"></i>\r\n            <span>Loading metadata...</span>\r\n         </span>\r\n         <div ng-show="item.metadata.abstract">\r\n            <strong>{{item.metadata.title}}</strong> -\r\n            <span class="icsm-abstract-body" ng-bind-html="item.metadata.abstractText"></span>\r\n         </div>\r\n         <div ng-show="!item.metadata.abstract">\r\n            <i class="fa fa-lg fa-exclamation-triangle" style="color:orange"></i>\r\n            There is no abstract available for this dataset.\r\n         </div>\r\n      </div>\r\n   </div>\r\n</div>'),t.put("icsm/results/unreleased.html",'<div ng-repeat="(key, items) in types" ng-show="(items | countMatchedItems) != 0">\r\n   <div style="padding-left:4px">\r\n      <h5>\r\n         <span uib-tooltip="{{filter.types[key].description}}">{{key}} (Showing {{items | countMatchedItems | number:0}} of {{items.length | number:0}})</span>\r\n      </h5>\r\n   </div>\r\n   <div ng-repeat="item in items" icsm-abstract-hover item="item">\r\n      <div tooltip-append-to-body="true" uib-tooltip-template="\'icsm/results/abstracttooltip.html\'" tooltip-popup-delay="400" data-ng-mouseenter="show(item)"\r\n         data-ng-mouseleave="hide(item)" style="padding-left:8px;">\r\n         <icsm-abstract item="item"></icsm-abstract>\r\n         <button type="button" class="undecorated" disabled="disabled" title="Licence details pending release.">\r\n            <i class="fa fa-lg fa-gavel"></i>\r\n         </button>\r\n         <span class="listItem" name="project_name" item="item" icsm-abstract-link></span>\r\n         <span ng-show="item.file_size" style="float:right;padding-top:3px">({{item.file_size | fileSize}})</span>\r\n      </div>\r\n      <div ng-show="item.showAbstract" class="well" style="margin-bottom:0px">\r\n         <span ng-show="!item.metadata">\r\n            <i class="fa fa-spinner fa-spin fa-lg fa-fw"></i>\r\n            <span>Loading metadata...</span>\r\n         </span>\r\n         <div ng-show="item.metadata.abstract">\r\n            <strong>{{item.metadata.title}}</strong> -\r\n            <span class="icsm-abstract-body" ng-bind-html="item.metadata.abstractText"></span>\r\n         </div>\r\n         <div ng-show="!item.metadata.abstract">\r\n            <i class="fa fa-lg fa-exclamation-triangle" style="color:orange"></i>\r\n            There is no abstract available for this dataset.\r\n         </div>\r\n      </div>\r\n      <div style="padding-left:12px">\r\n         <div>\r\n            <strong style="width:7em">Captured: </strong>{{item.captured | captured}}\r\n         </div>\r\n         <div ng-if="item.available_date">\r\n            <strong style="width:7em">Available: </strong>{{item.available_date | reverseDate}}\r\n         </div>\r\n         <div>\r\n            <strong style="width:7em">Contact: </strong>\r\n            <a href="mailTo:{{item.contact}}">{{item.contact}}</a>\r\n         </div>\r\n      </div>\r\n   </div>\r\n</div>'),t.put("icsm/select/doc.html",'<div ng-class-odd="\'odd\'" ng-class-even="\'even\'" ng-mouseleave="select.lolight(doc)" ng-mouseenter="select.hilight(doc)">\r\n\t<span ng-class="{ellipsis:!expanded}" tooltip-enable="!expanded" style="width:100%;display:inline-block;"\r\n\t\t\ttooltip-class="selectAbstractTooltip" tooltip="{{doc.abstract | truncate : 250}}" tooltip-placement="bottom">\r\n\t\t<button type="button" class="undecorated" ng-click="expanded = !expanded" title="Click to see more about this dataset">\r\n\t\t\t<i class="fa pad-right fa-lg" ng-class="{\'fa-caret-down\':expanded,\'fa-caret-right\':(!expanded)}"></i>\r\n\t\t</button>\r\n\t\t<download-add item="doc" group="group"></download-add>\r\n\t\t<icsm-wms data="doc"></icsm-wms>\r\n\t\t<icsm-bbox data="doc" ng-if="doc.showExtent"></icsm-bbox>\r\n\t\t<a href="https://ecat.ga.gov.au/geonetwork/srv/eng/search#!{{doc.primaryId}}" target="_blank" ><strong>{{doc.title}}</strong></a>\r\n\t</span>\r\n\t<span ng-class="{ellipsis:!expanded}" style="width:100%;display:inline-block;padding-right:15px;">\r\n\t\t{{doc.abstract}}\r\n\t</span>\r\n\t<div ng-show="expanded" style="padding-bottom: 5px;">\r\n\t\t<h5>Keywords</h5>\r\n\t\t<div>\r\n\t\t\t<span class="badge" ng-repeat="keyword in doc.keywords track by $index">{{keyword}}</span>\r\n\t\t</div>\r\n\t</div>\r\n</div>'),t.put("icsm/select/group.html",'<div class="panel panel-default" style="margin-bottom:-5px;" >\r\n\t<div class="panel-heading"><icsm-wms data="group"></icsm-wms> <strong>{{group.title}}</strong></div>\r\n\t<div class="panel-body">\r\n   \t\t<div ng-repeat="doc in group.docs">\r\n   \t\t\t<div select-doc doc="doc" group="group"></div>\r\n\t\t</div>\r\n\t</div>\r\n</div>\r\n'),t.put("icsm/select/select.html",'<div>\r\n\t<div style="position:relative;padding:5px;padding-left:10px;" ng-controller="SelectCtrl as select" class="scrollPanel">\r\n\t\t<div class="panel panel-default" style="margin-bottom:-5px">\r\n  \t\t\t<div class="panel-heading">\r\n  \t\t\t\t<h3 class="panel-title">Available datasets</h3>\r\n  \t\t\t</div>\r\n  \t\t\t<div class="panel-body">\r\n\t\t\t\t<div ng-repeat="doc in select.data.response.docs" style="padding-bottom:7px">\r\n\t\t\t\t\t<div select-doc ng-if="doc.type == \'dataset\'" doc="doc"></div>\r\n\t\t\t\t\t<select-group ng-if="doc.type == \'group\'" group="doc"></select-group>\r\n\t\t\t\t</div>\r\n  \t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</div>'),t.put("icsm/side-panel/side-panel-left.html",'<div class="cbp-spmenu cbp-spmenu-vertical cbp-spmenu-left" style="width: {{left.width}}px;" ng-class="{\'cbp-spmenu-open\': left.active}">\r\n    <a href="" title="Close panel" ng-click="closeLeft()" style="z-index: 1200">\r\n        <span class="glyphicon glyphicon-chevron-left pull-right"></span>\r\n    </a>\r\n    <div ng-show="left.active === \'legend\'" class="left-side-menu-container">\r\n        <legend url="\'img/AustralianTopogaphyLegend.png\'" title="\'Map Legend\'"></legend>\r\n    </div>\r\n</div>'),t.put("icsm/side-panel/side-panel-right.html",'<div class="cbp-spmenu cbp-spmenu-vertical cbp-spmenu-right noPrint" ng-attr-style="width:{{right.width}}" ng-class="{\'cbp-spmenu-open\': right.active}">\r\n    <a href="" title="Close panel" ng-click="closePanel()" style="z-index: 1">\r\n        <span class="glyphicon glyphicon-chevron-right pull-left"></span>\r\n    </a>\r\n\r\n    <div class="right-side-menu-container" ng-show="right.active === \'download\'" icsm-view></div>\r\n    <div class="right-side-menu-container" ng-show="right.active === \'maps\'" icsm-maps></div>\r\n    <div class="right-side-menu-container" ng-show="right.active === \'glossary\'" icsm-glossary></div>\r\n    <div class="right-side-menu-container" ng-show="right.active === \'help\'" icsm-help></div>\r\n    <panel-close-on-event only-on="search" event-name="clear.button.fired"></panel-close-on-event>\r\n</div>\r\n'),t.put("icsm/splash/splash.html",'<div class="modal-header">\r\n   <h3 class="modal-title splash">Elevation - Foundation Spatial Data</h3>\r\n</div>\r\n<div class="modal-body" id="accept" ng-form exp-enter="accept()" icsm-splash-modal style="width: 100%; margin-left: auto; margin-right: auto;">\r\n\t<div>\r\n\t\t<p>\r\n\t\t\tHere you can download point cloud and elevation datasets sourced from jurisdictions.\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\t<a href="http://www.ga.gov.au/topographic-mapping/digital-elevation-data.html" target="_blank">Find out more on our Elevation page.</a>\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tData can be downloaded at <strong>no charge</strong> and there is no limit to how many (please check the file size before you download your files).\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\t<a href="http://opentopo.sdsc.edu/gridsphere/gridsphere?cid=contributeframeportlet&gs_action=listTools" target="_blank">Click here for Free GIS Tools.</a>\r\n\t\t</p>\r\n      <h5>How to use</h5>\r\n      <p>\r\n         <ul>\r\n            <li>Pan and zoom the map to your area of interest,</li>\r\n            <li>Click on the "Select an area..." button to enable drawing,</li>\r\n            <li>Click on the map, holding the button down,</li>\r\n            <li>Drag to a diagonal corner (not too big, there is a limit of roughly 2 square degrees or 200 square km))</li>\r\n            <li>On release we will check for data within or very near your area of interest</li>\r\n            <li>If the list is large you can filter:\r\n               <ul>\r\n                  <li>Partial text match by typing in the filter field and/or</li>\r\n                  <li>You can restrict the display to either elevation (DEM) or point cloud file types</li>\r\n               </ul>\r\n            </li>\r\n            <li>Check against any file you would like to download. To reiterate, these files can be huge so take note of the file size before downloading</li>\r\n            <li>Review your selected datasets and submit.</li>\r\n            <li>An email will be sent to you with a link to all your data, zipped into a single file.</li>\r\n            <li>These files can be huge so take note of the file size before submitting or downloading</li>\r\n         </ul>\r\n      </p>\r\n      <h5>Hints</h5>\r\n      <p>\r\n         <ul>\r\n            <li>Hovering over many items will give you further information about the purpose of the item</li>\r\n            <li>Drawing a polyline allows you to measure distance along the polyline.</li>\r\n            <li>On completion on drawing a line the elevation along that line is plotted.</li>\r\n            <li>While the tool to draw your area of interest is enabled it is easiest to pan the map using the arrow keys.</li>\r\n            <li>There are many areas where there is no data though the coverage is improving all the time.</li\r\n         </ul>\r\n      </p>\r\n\t</div>\r\n   <div style="padding:30px; padding-top:0; padding-bottom:40px; width:100%">\r\n\t\t<div class="pull-right">\r\n\t\t  \t<button type="button" class="btn btn-primary" ng-model="seenSplash" ng-click="accept()" autofocus>Continue</button>\r\n\t\t</div>\r\n\t</div>\r\n</div>'),t.put("icsm/reviewing/reviewing.html",'<div class="modal-header">\r\n   <h3 class="modal-title splash">Download datasets by providing email address and start extract</h3>\r\n</div>\r\n<div class="modal-body" id="accept" ng-form exp-enter="accept()"\r\n            icsm-splash-modal style="width: 100%; margin-left: auto; margin-right: auto;">\r\n   <div class="row bg-warning" ng-show="noneSelected(products)">\r\n      <div class="col-md-2">\r\n         <button type="button" style="float:right" class="btn btn-primary" ng-click="cancel()">Close</button>\r\n      </div>\r\n   </div>\r\n   <div ng-controller="listCtrl as list">\r\n      <div class="row">\r\n         <div class="col-md-12">\r\n            <strong>\r\n               {{list.selected.length}} Selected Datasets\r\n               <span ng-show="list.selectedSize">(Approx: {{list.selectedSize | fileSize}})</span>\r\n            </strong>\r\n         </div>\r\n      </div>\r\n   </div>\r\n   <div ng-repeat="org in products">\r\n      <h5>\r\n         <img ng-src="{{mappings[org.source].image}}" ng-attr-style="height:{{mappings[org.source].height}}px"></img>\r\n         <strong>{{org.source}}</strong>\r\n      </h5>\r\n      <div style="padding-left:10px" ng-repeat="(key, subGroup) in org.downloadables">\r\n         <h5>{{key}}</h5>\r\n         <div style="padding-left:10px;" ng-repeat="(name, items) in subGroup">\r\n            <h5 title="Clipped product using coordinate System: {{data.outCoordSys.value}}, Output Format: {{data.outFormat.value}}">\r\n               {{name}}\r\n               <span style="padding-left:25px;font-size:90%">{{items.length | number :0}} items totalling {{items | reviewSumSize | fileSize}}</span>\r\n            </h5>\r\n         </div>\r\n      </div>\r\n\r\n   </div>\r\n\r\n\r\n   <div class="row reviewing-divider">\r\n      <div class="col-md-12">\r\n         <div review-email></div>\r\n      </div>\r\n   </div>\r\n   <div class="row" ng-controller="listCtrl as list">\r\n      <div class="col-md-8">\r\n         <strong>Email notification</strong> The extract of data can take some time. By providing an email address we will be able\r\n         to notify you when the job is complete. The email will provide a link to the extracted data which will be packaged\r\n         up as a single compressed file.\r\n      </div>\r\n      <div class="col-md-4">\r\n         <div class="pull-right" style="padding:8px;">\r\n            <button type="button" class="btn btn-primary" ng-click="accept()" ng-disabled="!data.email || !list.selected.length">Start extract of datasets\r\n            </button>\r\n            <button type="button" class="btn btn-primary" ng-click="cancel()">Cancel</button>\r\n         </div>\r\n      </div>\r\n   </div>\r\n</div>'),t.put("icsm/themes/themes.html",'<div class="dropdown themesdropdown">\r\n  <button class="btn btn-default dropdown-toggle themescurrent" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">\r\n    Theme\r\n    <span class="caret"></span>\r\n  </button>\r\n  <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">\r\n    <li ng-repeat="item in themes">\r\n       <a href="#" title="{{item.title}}" ng-href="{{item.url}}" class="themesItemCompact">\r\n         <span class="icsm-icon" ng-class="item.className"></span>\r\n         <strong style="vertical-align:top;font-size:110%">{{item.label}}</strong>\r\n       </a>\r\n    </li>\r\n  </ul>\r\n</div>'),t.put("icsm/toolbar/toolbar.html",'<div class="elevation-toolbar noPrint">\r\n   <div class="toolBarContainer">\r\n       <div>\r\n           <ul class="left-toolbar-items"></ul>\r\n           <ul class="right-toolbar-items">\r\n               <li>\r\n                   <panel-trigger panel-id="download" panel-width="590px" name="Download" default="default" icon-class="fa-list" title="Select an area of interest and select datasets for download"></panel-trigger>\r\n               </li>\r\n               <li>\r\n                 <panel-trigger panel-id="help" panel-width="590px" name="Help" icon-class="fa-question-circle-o" title="Show help"></panel-trigger>\r\n              </li>\r\n              <li>\r\n                <panel-trigger panel-id="glossary" panel-width="590px" name="Glossary" icon-class="fa-book" title="Show glossary"></panel-trigger>\r\n             </li>\r\n               <li reset-page></li>\r\n           </ul>\r\n       </div>\r\n   </div>\r\n</div>'),t.put("icsm/view/view.html",'<div class="container-fluid downloadPane">\r\n   <icsm-clip data="data.item"></icsm-clip>\r\n   <div class="list-container">\r\n      <icsm-list></icsm-list>\r\n   </div>\r\n   <div class="downloadCont" icsm-search-continue></div>\r\n</div>')}]);